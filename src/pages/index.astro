---
import "../styles/global.css";
import MonogramDark from '../assets/monogram-dark-mode.svg?raw';
import MonogramLight from '../assets/monogram-light-mode.svg?raw';
---

<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon-light-mode.svg" media="(prefers-color-scheme: light)" />
		<link rel="icon" type="image/svg+xml" href="/favicon-dark-mode.svg" media="(prefers-color-scheme: dark)" />
		<link rel="icon" type="image/svg+xml" href="/favicon-dark-mode.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content="Experiencia humana polímata viviendo un sistema de múltiples consciencias a través del ininterrumpido, inevitable e irreversible viaje hacia mi destino.">
		<title>Amet Alvirde</title>
		<script>
			// Theme management - runs before page load to prevent flash
			(function() {
				// Safe localStorage access (prevents errors in private browsing)
				const getStoredTheme = () => {
					try { return localStorage.getItem('theme'); } catch { return null; }
				};
				
				// Get user's theme preference
				const preference = getStoredTheme() || 'system';
				
				// Determine actual theme to apply
				const actualTheme = preference === 'system' 
					? (window.matchMedia?.('(prefers-color-scheme: light)').matches ? 'light' : 'dark')
					: preference;
				
				// Apply theme immediately (prevents FOUC)
				document.documentElement.setAttribute('data-theme', actualTheme);
				document.documentElement.setAttribute('data-theme-preference', preference);
				
				// Set favicon when DOM is ready
				const setFavicon = () => {
					const favicon = document.querySelector('link[rel="icon"]:not([media])');
					if (favicon) {
						(favicon as HTMLLinkElement).href = actualTheme === 'light' ? '/favicon-light-mode.svg' : '/favicon-dark-mode.svg';
					}
				};
				
				document.readyState === 'loading' 
					? document.addEventListener('DOMContentLoaded', setFavicon)
					: setFavicon();
			})();
		</script>
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://www.ametalvirde.com/" />
		<meta property="og:title" content="Amet Alvirde" />
		<meta property="og:description" content="Experiencia humana polímata viviendo un sistema de múltiples consciencias." />
		<meta property="og:image" content="https://www.ametalvirde.com/monogram-dark-mode.svg" />
		<meta property="og:locale" content="es_MX" />

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content="https://www.ametalvirde.com/" />
		<meta property="twitter:title" content="Amet Alvirde" />
		<meta property="twitter:description" content="Experiencia humana polímata viviendo un sistema de múltiples consciencias." />
		<meta property="twitter:image" content="https://www.ametalvirde.com/monogram-dark-mode.svg" />

		<!-- Structured Data -->
		<script type="application/ld+json">
		{
		  "@context": "https://schema.org",
		  "@type": "Person",
		  "name": "Amet Alvirde",
		  "description": "Experiencia humana polímata viviendo un sistema de múltiples consciencias",
		  "url": "https://www.ametalvirde.com",
		  "image": "https://www.ametalvirde.com/monogram-dark-mode.svg",
		  "sameAs": [
			"https://twitter.com/ametalvirde",
			"https://www.instagram.com/ametalvirde/",
			"https://www.tiktok.com/@ametalvirde"
		  ]
		}
		</script>

		<!-- Additional meta tags -->
		<meta name="author" content="Amet Alvirde" />
		<meta name="robots" content="index, follow" />
		<meta name="theme-color" content="#e9c232" />

		<!-- FOUC-prevention for monogram -->
		<style is:inline>
			.monogram-light { display: none; }
			.monogram-dark { display: block; } /* Default to dark */

			[data-theme="light"] .monogram-light { display: block; }
			[data-theme="light"] .monogram-dark { display: none; }
		</style>

		<!-- Canonical URL -->
		<link rel="canonical" href="https://www.ametalvirde.com/" />
	</head>
	<body style="background-color: rgb(var(--bg-primary)); color: rgb(var(--text-primary));" class="h-[100dvh] flex flex-col items-center">
		<style>
			body {
				selection-background-color: rgb(var(--selection-bg));
				selection-color: rgb(var(--selection-text));
			}
			
			::selection {
				background-color: rgb(var(--selection-bg));
				color: rgb(var(--selection-text));
			}
			
			/* Social button hover effect - matches theme buttons */
			.social-button:hover {
				background: var(--accent-color) !important;
				color: var(--selection-text) !important;
			}
		</style>
		
		<!-- Brutalist Navbar -->
		<nav class="w-full px-6 py-4 flex justify-end items-center fixed top-0 left-0 right-0 z-50 border-b-2 shadow-lg" 
			 style="background: var(--bg-primary); border-color: var(--text-color); box-shadow: 0 1dvh 0 0 var(--text-primary);">
			
			<div id="theme-controls" class="flex gap-3">
				<button class="theme-button p-3 rounded-full border font-black uppercase tracking-wide transition-all duration-200 ease-in-out hover:translate-x-0.5 hover:translate-y-0.5 hover:scale-110 active:translate-x-1 active:translate-y-1 active:shadow-none focus-visible:outline-2 focus-visible:outline-offset-2" 
						id="system-theme-toggle" 
						aria-label="Usar tema del sistema" 
						style="background: var(--bg-secondary); border-color: var(--border-color); color: var(--text-primary); box-shadow: 2px 2px 0 0 var(--text-primary); --tw-outline-color: var(--accent-color);">
					<svg fill="currentColor" viewBox="0 0 20 20" class="w-4 h-4 transition-none">
						<path fill-rule="evenodd" d="M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7H5V5h10v7H8.771z" clip-rule="evenodd"></path>
					</svg>
				</button>
				
				<button class="theme-button p-3 rounded-full border font-black uppercase tracking-wide transition-all duration-200 ease-in-out hover:translate-x-0.5 hover:translate-y-0.5 hover:scale-110 active:translate-x-1 active:translate-y-1 active:shadow-none focus-visible:outline-2 focus-visible:outline-offset-2" 
						id="theme-toggle" 
						aria-label="Alternar tema manualmente" 
						title="Alternar entre tema claro y oscuro"
						style="background: var(--bg-secondary); border-color: var(--border-color); color: var(--text-primary); box-shadow: 2px 2px 0 0 var(--text-primary); --tw-outline-color: var(--accent-color);">
					<svg id="sun-icon" class="hidden w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
						<path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
					</svg>
					<svg id="moon-icon" class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
						<path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
					</svg>
				</button>
			</div>
		</nav>

		<main class="flex flex-col lg:flex-row items-center lg:justify-start justify-center text-center lg:text-left max-w-md lg:max-w-6xl w-full mt-[10dvh]">
			<div id="monogram" class="w-xs md:w-sm lg:w-lg h-auto mb-0 md:mb-0 md:flex-shrink-0">
				<div class="monogram-light">
					<Fragment set:html={MonogramLight} />
				</div>
				<div class="monogram-dark">
					<Fragment set:html={MonogramDark} />
				</div>
			</div>
			<div id="about" class="flex flex-col items-center lg:items-start justify-center text-center lg:text-left max-w-md lg:max-w-none w-full">
				<h1 class="text-4xl font-bold mb-2 lg:text-6xl lg:-mt-12">Amet Alvirde</h1>
				<p id="bio" class=" md:mx-0 lg:max-w-2xl text-balance text-xl md:text-xl lg:text-2xl leading-relaxed mb-2">
					Experiencia humana polímata habitando el eterno presente del ininterrumpido, inevitable e irreversible viaje hacia mi destino.
				</p>
				<p class="text-balance text-xl lg:text-2xl leading-relaxed color-text-secondary mb-2">Explora el <a target="_blank" rel="noopener noreferrer" href="https://publish.obsidian.md/amet-alvirde/Mapa+público+de+mi+consciencia" class="text-accent">mapa público de mi consciencia</a>.</p>
				
				<!-- Social Links -->
				<div id="social-links" class="flex gap-4 mt-4">
					<a href="https://twitter.com/ametalvirde" 
					   target="_blank" 
					   rel="noopener noreferrer"
					   class="social-button p-3 rounded-full border font-black uppercase tracking-wide transition-all duration-200 ease-in-out hover:translate-x-0.5 hover:translate-y-0.5 hover:scale-110 active:translate-x-1 active:translate-y-1 active:shadow-none focus-visible:outline-2 focus-visible:outline-offset-2" 
					   aria-label="Twitter / X"
					   style="background: var(--bg-secondary); border-color: var(--border-color); color: var(--text-primary); box-shadow: 2px 2px 0 0 var(--text-primary); --tw-outline-color: var(--accent-color);">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
							<path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
						</svg>
					</a>
					
					<a href="https://www.instagram.com/ametalvirde/" 
					   target="_blank" 
					   rel="noopener noreferrer"
					   class="social-button p-3 rounded-full border font-black uppercase tracking-wide transition-all duration-200 ease-in-out hover:translate-x-0.5 hover:translate-y-0.5 hover:scale-110 active:translate-x-1 active:translate-y-1 active:shadow-none focus-visible:outline-2 focus-visible:outline-offset-2" 
					   aria-label="Instagram"
					   style="background: var(--bg-secondary); border-color: var(--border-color); color: var(--text-primary); box-shadow: 2px 2px 0 0 var(--text-primary); --tw-outline-color: var(--accent-color);">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
							<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
						</svg>
					</a>
					
					<a href="https://www.tiktok.com/@ametalvirde" 
					   target="_blank" 
					   rel="noopener noreferrer"
					   class="social-button p-3 rounded-full border font-black uppercase tracking-wide transition-all duration-200 ease-in-out hover:translate-x-0.5 hover:translate-y-0.5 hover:scale-110 active:translate-x-1 active:translate-y-1 active:shadow-none focus-visible:outline-2 focus-visible:outline-offset-2" 
					   aria-label="TikTok"
					   style="background: var(--bg-secondary); border-color: var(--border-color); color: var(--text-primary); box-shadow: 2px 2px 0 0 var(--text-primary); --tw-outline-color: var(--accent-color);">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
							<path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
						</svg>
					</a>
				</div>
			</div>
		</main>

		<section id="bottom-stripes" class="fixed bottom-0 left-0 right-0 flex flex-col z-10">
			<div class="h-1 md:h-2 bg-accent"></div>
			<div class="h-1 md:h-2 bg-text-primary"></div>
		</section>

		<script>
			import { initializeThemeManager } from '../utils/theme-manager.ts';
			
			document.addEventListener('DOMContentLoaded', () => {
				initializeThemeManager();
			});
		</script>
	</body>
</html>
